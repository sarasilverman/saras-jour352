"use strict";Type.registerNamespace("Panopto"),Panopto.Util=function(){},Panopto.Util.defaultDeliveryName="default",Panopto.Util.c_dataServiceUrl=Panopto.appRoot+"/Services/Data.svc",Panopto.Util.addChangeHandler=function(t,o,e,n){$addHandler(t,"change",(function(t){var a=t.currentTarget;Panopto.Util._handleEvent(o,e,t,a,n)}))},Panopto.Util._handleEvent=function(t,o,e,n,a){o.call(t,e,n),a&&0==a.preventDefault||e.preventDefault(),a&&a.stopPropagation&&e.stopPropagation()},Panopto.Util.$getLoadingIndicator=function(){var t=$("#modalSpinner");if(!t.length&&window!=parent){var o=document.createElement("a");if(o.href=document.referrer,o.hostname===window.location.hostname)try{t=$("#modalSpinner",parent.document)}catch(t){}}return t.usesSpinningClass=!0,t},Panopto.Util.showLoadingIndicator=function(t,o){t.usesSpinningClass?t.toggleClass("spinning",o||null==o):t.toggle(o)},Panopto.Util.timepickerLocalSettings={am:Panopto.GlobalResources.Timepicker_am,pm:Panopto.GlobalResources.Timepicker_pm,AM:Panopto.GlobalResources.Timepicker_am.toUpperCase(),PM:Panopto.GlobalResources.Timepicker_pm.toUpperCase(),decimal:".",mins:Panopto.GlobalResources.Timepicker_min,hr:Panopto.GlobalResources.Timepicker_hr,hrs:Panopto.GlobalResources.Timepicker_hrs},Panopto.Util.callWebMethod=function(t){var o=$();t.loadingIndicator?o=$(t.loadingIndicator):void 0===t.loadingIndicator&&(o=Panopto.Util.$getLoadingIndicator()),Panopto.Util.showLoadingIndicator(o,!0);const e=t.serviceURL||Panopto.Util.c_dataServiceUrl;return Sys.Net.WebServiceProxy.invoke(e,t.methodName,!1,t.params,(function(e){t.onSuccess&&t.onSuccess(e),Panopto.Util.showLoadingIndicator(o,!1)}),(function(e){t.onFailure&&t.onFailure(e),Panopto.Util.showLoadingIndicator(o,!1)}))},Panopto.Util.showIndicatorForDataContextSave=function(t){var o=Panopto.Util.$getLoadingIndicator();Panopto.Util.showLoadingIndicator(o,!0),t.set_handleSaveChangesResultsMethod((function(){Panopto.Util.showLoadingIndicator(o,!1)}))},Panopto.Util.displayDeliveryName=function(t){return Panopto.Core.TextHelpers.cleanTextWithHighlighting(Panopto.Util.getDeliveryName(t))},Panopto.Util.isDeliveryPlaylist=function(t){return t.PlayableObjectType===Panopto.Core.PlayableObjectType.Playlist},Panopto.Util.getThumbnailTooltip=function(t){return Panopto.Util.isDeliveryPlaylist(t)?Panopto.GlobalResources.Sessions_List_PlayThisPlaylist:Panopto.GlobalResources.Sessions_List_PlayThisSession},Panopto.Util.displayDeliveryNameWithoutHighlighting=function(t){return Panopto.Core.TextHelpers.cleanTextWithoutHighlighting(Panopto.Util.getDeliveryName(t))},Panopto.Util.getDeliveryName=function(t){var o=t.SessionName,e=t.DeliveryName;return e&&e!=Panopto.Util.defaultDeliveryName?String.format("{0} ({1})",o,e):o},Panopto.Util.askBeforeClosing=function(t,o){var e=$(t);Panopto.Util.addChangeHandler(t,this,(function(){var t=_.some(e,(function(t){return $(t).val().trim().length}));Panopto.leavePageConfirmationMessage=t?o:null}))},Panopto.Util.displayUserName=function(t){var o=t.UserKey;return t.FullName&&(o=String.format("{0} ({1})",t.FullName,t.UserKey)),Panopto.Core.TextHelpers.cleanTextWithHighlighting(o)},Panopto.Util.displayFullNameAndEmail=function(t,o){var e="";return t=Panopto.Core.TextHelpers.cleanTextWithHighlighting(t),o=Panopto.Core.TextHelpers.cleanTextWithHighlighting(o),t?(e=t,o&&(e+=String.format(" &lt;{0}&gt;",o))):e=o||"",e},Panopto.Util.dateToUtc=function(t){var o=t.getTime(),e=60*t.getTimezoneOffset()*1e3;return new Date(o+e)},Panopto.Util.displayDate=function(t,o){let e,n=Panopto.GlobalResources.None;return t&&(o&&(o.local||o.toPanoptoTime)||(t=Panopto.Util.dateToUtc(t)),o&&o.toPanoptoTime&&(t=Panopto.Core.TimeHelpers.toLocalPanoptoTime(t,Panopto.timeZone)),e=moment(t).locale(Panopto.lang),n=o&&"time"===o.format?t.localeFormat("t"):o&&"short"===o.format?t.localeFormat("d")+" "+t.localeFormat("t"):o&&"shortWithTimeZone"===o.format?t.localeFormat("d")+" "+t.localeFormat("t")+" "+PanoptoCore.Extensions.DateExtensions.getTimeZoneShortName(t,Panopto.timeZone.ianaName):o&&"long"===o.format?t.localeFormat("ddd")+", "+t.localeFormat("d")+" "+t.localeFormat("t"):o&&"friendly"===o.format?e.format("LL"):o&&"timeAgoFromPanoptoLocal"===o.format?e.from(Panopto.Core.TimeHelpers.toLocalPanoptoTime(new Date,Panopto.timeZone)):t.localeFormat("d")),n},Panopto.Util.getDateMessage=function(t){switch(t.Status){case PanoptoApiClient.SessionLists.SessionStatus.Created:case PanoptoApiClient.SessionLists.SessionStatus.Scheduled:return Panopto.GlobalResources.Sessions_List_ScheduledFor.format(Panopto.Util.displayDate(t.StartTime,{format:"shortWithTimeZone"}));case PanoptoApiClient.SessionLists.SessionStatus.Recording:case PanoptoApiClient.SessionLists.SessionStatus.Live:return Panopto.GlobalResources.Sessions_List_RecordingRightNow;default:return Panopto.Util.displayDate(t.StartTime,{format:"timeAgoFromPanoptoLocal"})}},Panopto.Util.displayViewCount=function(t){if(t.AnalyticsAllTimeViewCount){const o=t.AnalyticsAllTimeViewCount;if(o<10)return"";if(o<1e3){const t=o<100?10:100;return t*Math.floor(o/t)+"+"}return o<Math.pow(10,5)?Math.round(o/100)/10+"k":o<Math.pow(10,6)?Math.round(o/1e3)+"k":o<Math.pow(10,7)?Math.round(o/Math.pow(10,5))/10+"MM":Math.floor(o/Math.pow(10,6))+"MM"}},Panopto.Util.displayTime=function(t,o){var e=Panopto.GlobalResources.N_a;return t&&(o&&o.utc&&(t=Panopto.Util.dateToUtc(t)),e=t.localeFormat("t")),e},Panopto.Util.displayDuration=function(t,o){return o&&o.showZero?(t=t||0,Panopto.Core.TimeHelpers.formatDuration(t,Panopto.GlobalResources.TimeSeparator)):"number"!=typeof t?"":Panopto.Core.TimeHelpers.formatDuration(t,Panopto.GlobalResources.TimeSeparator)},Panopto.Util.displayPresenterMessage=function(t){let o="",e="";return t.PresenterFirstNames&&t.PresenterFirstNames.length&&t.PresenterLastNames&&t.PresenterLastNames.length&&(e=t.PresenterFirstNames[0]+" "+t.PresenterLastNames[0],e=_.escape(e),o=Panopto.GlobalResources.ThumbnailItemTemplate_ByPresenter.format(e)),o},Panopto.Util.displayDollars=function(t){let o=null;if(t||0==t){const e=Math.min(3,Panopto.Util.countDecimals(t));o=String.format("${0}",t.toFixed(e))}return o},Panopto.Util.countDecimals=function(t){const o=t.toString();let e=0;if(o.indexOf("e-")>-1){const[t,n]=o.split("e-");e=parseInt(n)}else Math.floor(t)!==t&&(e=t.toString().split(".")[1].length||0);return e},Panopto.Util.displayGB=function(t){return t.localeFormat("N02")+" GB"},Panopto.Util.displayBoolean=function(t){return t?Panopto.GlobalResources.Yes:Panopto.GlobalResources.No},Panopto.Util.getAbsoluteUrl=function(t,o){var e=o?o+"."+Panopto.hostedSuffix:Panopto.webServerFQDN;return Panopto.uriScheme+"://"+e+Panopto.appRoot+t},Panopto.Util.getThumbnailUrl=function(t){return t.ThumbUrl},Panopto.Util.inheritingDropdownChange=function(){var t=$(".courseDropDown");if("true"===t.attr("data-isinheriting")){var o="0"===t.find(":selected").val()?Panopto.GlobalResources.Controls_SessionGroupChooser_TopLevelWarning:Panopto.GlobalResources.Controls_SessionGroupChooser_NewFolderWarning;$(".inheritance-warning").text(o),$(".inheritance-warning").show()}},Panopto.Util.getViewerLink=function(t,o){return t.ViewerUrl+(o?"&start="+o:"")},Panopto.Util.getViewerLinkWithQuery=function(t,o){let e=null;Panopto.isEmbedded&&!Panopto.cookiesEnabledInBrowser&&(e=PanoptoCore.TokenAuth.getStaticStoredAuthToken());let n=Panopto.Application.defaultInstance.getSearchText();const a=n.split(" ").filter((t=>!t.startsWith("tag:")));return n=encodeURIComponent(a.join(" ")),t.ViewerUrl+(e?`&${PanoptoCore.LTI.ltiStoredTokenParamName}=`+e:"")+(n?"&query="+n:"")+(o?"&start="+o:"")},Panopto.Util.flagModal=function(t){var o=parent.Panopto.ModalPopup.defaultInstance;o.flagChanges(!0),o.updateArgs(t)},Panopto.Util.closeModal=function(t){var o=parent.Panopto.ModalPopup.defaultInstance;o.flagChanges(o.flagChanges()||t),o.close()},Panopto.Util.updateModalHeader=function(t,o){parent&&(parent.Panopto.ModalPopup.defaultInstance.updateArgs({updateFolderInfo:o}),parent.Panopto.Application.defaultInstance.updateState({modalHeader:t.replaceAll("&#39;","'")}))},Panopto.Util.handleThumbnailLoad=function(t){function o(t,o){var e=t.closest(".thumbnail-container"),n=e.find(".thumbnail-img");n.toggle(o),n.next(".thumbnail-failed-load").toggle(!o),n.toggleClass("failed-load",!o),o&&_.defer((function(){Panopto.Util.fitThumbnailWidth(t,e)}))}t.find("a:visible .thumbnail-img, span:visible .thumbnail-img").on("load",(function(t){o($(t.currentTarget),!0)})).each((function(t,e){e.complete&&o($(e),!0)})).on("error",(function(t){o($(t.currentTarget),!1)}))},Panopto.Util.fitThumbnailWidth=function(t,o){t.width()>o.width()&&(t.width("100%"),t.height("auto"),Panopto.Util.verticallyCenterThumbnail(t,o))},Panopto.Util.verticallyCenterThumbnail=function(t,o){if(t.height()<o.height()){let e=(o.height()-t.height())/2;t.css("padding",`${e}px 0`)}},Panopto.Util.handleResize=function(t,o){var e=$(window).height()-$("#header").outerHeight()-($(".content-header").outerHeight()||0);if(t){let t=o?0:$(".pagination").outerHeight();e-=$("#sortHeaderDataView").outerHeight()+t,$(".content-table").css("height",e),$(".drop-target-overlay").css({height:e,bottom:t})}else{let t=parseInt($(".content-page").css("padding-top"),10)+parseInt($(".content-page").css("padding-bottom"),10);$(".content-page").css("height",e-t)}},Panopto.Util.isViewable=function(t){return t==PanoptoApiClient.SessionLists.SessionStatus.Complete||t==PanoptoApiClient.SessionLists.SessionStatus.Live||t===PanoptoApiClient.SessionLists.SessionStatus.Archived},Panopto.Util.navigateToFolderSessionList=function(t){if(Panopto.SessionList)Panopto.SessionList.navigateToPageState({folderID:t});else{let o=Panopto.appRoot+Panopto.Core.Constants.SessionsListAppRelativeUrl;o=Panopto.Core.StringHelpers.addQueryParameter(o,{folderID:t}),Panopto.teamsApp?.isFromTeams&&(o=Panopto.Core.StringHelpers.addQueryParameter(o,{embedded:"nav",isFromTeams:!0})),location.href=o}},Array.equals=function(t,o){if(t===o)return!0;if(null==t||null==o)return!1;if(t.length!=o.length)return!1;var e=!0;return $.each(t,(function(n,a){if(t[n]!=o[n])return e=!1,!1})),e},Array.prototype.indexOf||(Array.prototype.indexOf=function(t,o){void 0===o&&(o=0),o<0&&(o+=this.length),o<0&&(o=0);for(var e=this.length;o<e;o++)if(o in this&&this[o]===t)return o;return-1}),Panopto.Util.displayArchiveEstimatedRestoreTime=function(t,o){return new Date<o?PanoptoTS.StringHelpers.format(Panopto.GlobalResources.Archived_RestoreInProgress,Panopto.Util.displayDate(t,{toPanoptoTime:!0,format:"short"}),Panopto.Util.displayDate(o,{toPanoptoTime:!0,format:"timeAgoFromPanoptoLocal"})):Panopto.GlobalResources.ArchiveList_RestorationInProgress},Panopto.Util.registerClass("Panopto.Util");
//# sourceMappingURL=file://engfs.d.panopto.com/share/jenkinsbuilds/rel_rtc_15.3.1/15.3.1.00010/_PublishedWebsites/WebUI/Scripts/Panopto/Util.js.map
